<html>
<head>
    <!-- header -->
    <title>OWASP Honeypot</title>
    <!-- import css files -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <!-- style.css used as general css file for index.html -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- import js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/Chart.min.js"></script>
    <!-- main.js used as general js file for index.html -->
    <script src="/js/main.js"></script>
    <!-- end of header header -->
</head>
<body>
<!-- start body -->
<div class="container">
    <br>
    <!-- welcoming message, probably should replace with navbar later -->
    <p class="text-center">Welcome to <b>OWASP Honeypot</b> WebUI</p>
    <center>
        <!-- body analytics-->
        <!-- using API (main.js) to show some analytics -->
        <!-- number of all events from the beginning -->
        <small>Total Events: <b><a id="count_all_events">x</a></b></small>
        <!-- number of all honeypot related events from the beginning -->
        <small>Total Honeypot Events: <b><a id="count_ohp_events">x</a></b></small>
        <!-- number of all network related events from the beginning -->
        <small>Total Network Events: <b><a id="count_network_events">x</a></b></small>
        <div style="width:70%; text-align:center;">
            <!-- graph takes 5 seconds to load, we need to wait all requests get responded before showing them -->
            <blink id="blink_loading_graph">
                <!-- this will disappear after graph appears -->
                <small>loading live graph, please wait <b>10</b> seconds!</small>
            </blink>
            <!-- graph will be locate in here and it shows 1-past week all events 2-honeypot events 3-network events -->
            <!-- graph will get automatically updated if anything changes in network every 60 seconds -->
            <!-- its using main.js to communicating with API -->
            <canvas class="align-content-center text-center modal-dialog-centered" style="text-align:center"
                    id="past_week_events_graph"></canvas>
        </div>
        <br>
        <div class="row">
            <div class="col-md-6" style="">
                <canvas id="top_ten_ips_in_honeypot_events_graph" width="400" height="450">
                </canvas>
            </div>
            <div class="col-md-6" style="">
                <canvas id="top_ten_ips_in_network_events_graph" width="400" height="450">
                </canvas>
            </div>
            <br>
            <div class="col-md-6" style="">
                <canvas id="top_ten_ports_in_honeypot_events_graph" width="400" height="450">
                </canvas>
            </div>
            <div class="col-md-6" style="">
                <canvas id="top_ten_ports_in_network_events_graph" width="400" height="450">
                </canvas>
            </div>
            <!-- end of analytics-->
        </div>
    </center>

    <script>
        var randomScalingFactor = function () {
            return Math.round(Math.random() * 100);
        };

        var chartColors = window.chartColors;
        var color = Chart.helpers.color;
        var config = {
            data: {
                datasets: [{
                    data: [
                        randomScalingFactor(),
                        randomScalingFactor(),
                        randomScalingFactor(),
                        randomScalingFactor(),
                        randomScalingFactor(),
                    ],
                    backgroundColor: [
                        color(chartColors.red).alpha(0.5).rgbString(),
                        color(chartColors.orange).alpha(0.5).rgbString(),
                        color(chartColors.yellow).alpha(0.5).rgbString(),
                        color(chartColors.green).alpha(0.5).rgbString(),
                        color(chartColors.blue).alpha(0.5).rgbString(),
                    ],
                    label: 'My dataset' // for legend
                }],
                labels: [
                    'Red',
                    'Orange',
                    'Yellow',
                    'Green',
                    'Blue'
                ]
            },
            options: {
                responsive: true,
                legend: {
                    position: 'right',
                },
                title: {
                    display: true,
                    text: 'Chart.js Polar Area Chart'
                },
                scale: {
                    ticks: {
                        beginAtZero: true
                    },
                    reverse: false
                },
                animation: {
                    animateRotate: false,
                    animateScale: true
                }
            }
        };
        // console.log(config);
        // window.onload = function () {
        //     var ctx = document.getElementById('top_ten_ips_in_honeypots_events_graph');
        //     window.myPolarArea = Chart.PolarArea(ctx, config);
        //     var ctx = document.getElementById('top_ten_ips_in_network_events_graph');
        //     window.myPolarArea = Chart.PolarArea(ctx, config);
        //     var ctx = document.getElementById('top_ten_ports_in_honeypots_events_graph');
        //     window.myPolarArea = Chart.PolarArea(ctx, config);
        //     var ctx = document.getElementById('top_ten_ports_in_network_events_graph');
        //     window.myPolarArea = Chart.PolarArea(ctx, config);
        // };


    </script>
    <div class="align-content-center text-center">
        <!-- footer -->
        <!-- OWASP Logo -->
        <a class="" href="/"><img am-TopLogo alt="SECUREVIEW" src="/img/owasp.png" class="img-responsive"></a><br>
        <!-- Links -->
        <a href="https://www.owasp.org">OWASP Honeypot</a> -
        <a href="https://github.com/zdresearch/OWASP-Honeypot">GitHub</a>
        <!-- end of footer -->
    </div>
    <br>
</div>
<!-- end of body -->
</body>
</html>